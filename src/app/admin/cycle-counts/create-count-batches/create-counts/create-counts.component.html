<mat-card class="mat-elevation-z g-card mb-3 mt-2">
    <mat-card-content>
        <h2 class="card-header-title mb-3 d-flex align-items-center">
            <div class="mat-icon-wrap me-lg-3">
                <span class="material-symbols-outlined">
                    add_road
                </span>
            </div>
            <span>Create Counts</span>
        </h2>

        <div class="row">
            <div class="col-xl-3 mb-2">
                
                <mat-form-field class="action-dropdown w-100" appearance="outline">
                    <mat-label>Count Type</mat-label>
                    <mat-select [(ngModel)]="selection" #matRef class="employees-action" value="location">
                        <mat-option value="LocationRange">Location Range</mat-option>
                        <mat-option value="ItemNumber">Item Number</mat-option>
                        <mat-option value="Description">Description</mat-option>
                        <mat-option value="Category">Category</mat-option>
                        <mat-option value="NotCountedSince">Not Counted Since</mat-option>
                        <mat-option value="PickedRange">Picked Date Range</mat-option>
                        <mat-option value="PutAwayRange">Put Away Date Range</mat-option>
                        <mat-option value="CostRange">Cost Range</mat-option>
                    </mat-select>
                    <span class="material-symbols-outlined icon-expand-more">
                        expand_more
                    </span>
                </mat-form-field>
            </div>

            <div class="col-xl-3 mb-2">
                <mat-form-field class="action-dropdown w-100" appearance="outline">
                    <mat-label>Warehouse</mat-label>
                    <mat-select [(ngModel)]="warehouse"  (ngModelChange)="this.searchField.next($event)"  #matRef class="employees-action" placeholder="Actions">
                        <mat-option *ngFor="let items of warehouses" [value]="items"> {{items}}</mat-option>

                    </mat-select>
                    <span class="material-symbols-outlined icon-expand-more">
                        expand_more
                    </span>
                </mat-form-field>
            </div>
        </div>
        <form    [formGroup]="filtersForm" >

        <div class="row align-items-center" [ngSwitch]="selection">
            <!--  search by location  -->
            <ng-container *ngSwitchCase="'LocationRange'">
                <div class="col-xl-3">
                    <mat-form-field class="custom-form-field w-100 __grab_cursor mb-2" appearance="outline">
                        <mat-label>From Location</mat-label>
                        <input  (ngModelChange)="this.searchField.next($event)"  matInput  class="__grab_cursor " type="text" maxlength="50" formControlName="fromLocation">
                    </mat-form-field>
                </div>
                <div class="col-xl-3">
                    <mat-form-field class="custom-form-field w-100 __grab_cursor mb-2" appearance="outline">
                        <mat-label>To Location</mat-label>
                        <input (ngModelChange)="this.searchField.next($event)"  matInput  class="__grab_cursor " type="text" maxlength="50" formControlName="toLocation">
                    </mat-form-field>
                </div>
                <div class="col-xl-6">
                    <div class="d-flex flex-wrap gap-12 px-3">
                        <mat-checkbox (ngModelChange)="this.searchField.next($event)"   formControlName="includeEmpty" class="example-margin custom-checkbox mb-2" color="primary">Include Empty
                            Locations?</mat-checkbox>

                        <mat-checkbox (ngModelChange)="this.searchField.next($event)"   formControlName="includeOther" class="example-margin custom-checkbox mb-2" color="primary">Include Other
                            Locations?</mat-checkbox>
                    </div>
                </div>
            </ng-container>

            <!--  search by item  -->

            <ng-container *ngSwitchCase="'ItemNumber'">

                <div class="col-xl-3">
                    <mat-form-field class="custom-form-field w-100 __grab_cursor mb-2" appearance="outline">
                        <mat-label>From Item Number</mat-label>
                        <input (ngModelChange)="this.searchField.next($event)"   formControlName="fromItem"  matInput  class="__grab_cursor " type="text" maxlength="50">
                    </mat-form-field>
                </div>
                <div class="col-xl-3">
                    <mat-form-field class="custom-form-field w-100 __grab_cursor mb-2" appearance="outline">
                        <mat-label>To Item Number</mat-label>
                        <input (ngModelChange)="this.searchField.next($event)"  formControlName="toItem"   matInput  class="__grab_cursor " type="text" maxlength="50">
                    </mat-form-field>
                </div>

            </ng-container>

            <!-- search by description -->
            <ng-container *ngSwitchCase="'Description'" >

                <div class="col-xl-6" >
                    <mat-form-field  [floatLabel]="getFloatLabelValue()" [hideRequiredMarker]="hideRequiredControl.value" class="custom-form-field w-100 __grab_cursor mb-2" appearance="outline">
                        <mat-label>Decription</mat-label>
                        <input  [matAutocomplete]="auto" (ngModelChange)="this.descriptionTA.next($event)"  formControlName="description"   matInput  class="__grab_cursor " type="text" maxlength="50">
                        <mat-autocomplete #auto="matAutocomplete" (optionSelected)="searchData()" >
                            <mat-option *ngFor="let option of searchAutocompleteDescription" [value]="option">
                                {{option}}
                            </mat-option>
                        </mat-autocomplete>
                    </mat-form-field>
                </div>


            </ng-container>

            <!-- search by category -->
            <ng-container *ngSwitchCase="'Category'">
              

                <div class="col-xl-3">
                    <!-- <mat-form-field class="custom-form-field w-100 __grab_cursor mb-2" appearance="outline">
                        <mat-label>Category</mat-label>
                        <input (ngModelChange)="this.searchField.next($event)"  formControlName="category"  matInput  class="__grab_cursor " type="text" maxlength="50">
                    </mat-form-field> -->


                      <mat-form-field  [floatLabel]="getFloatLabelValue()" [hideRequiredMarker]="hideRequiredControl.value" class="custom-form-field w-100 __grab_cursor mb-2" appearance="outline">
                    <mat-label>Category</mat-label>
                    <input  [matAutocomplete]="auto" (ngModelChange)="this.categoryTA.next($event)" formControlName="category"  matInput  class="__grab_cursor " type="text" maxlength="50">
                    <mat-autocomplete #auto="matAutocomplete" (optionSelected)="searchData()" >
                        <mat-option *ngFor="let option of searchAutocompletCategory" [value]="option.category">
                            {{option.category}}
                        </mat-option>
                    </mat-autocomplete>
                </mat-form-field>
                </div>
                <div class="col-xl-3">
                    <mat-form-field class="custom-form-field w-100 __grab_cursor mb-2" appearance="outline">
                        <mat-label>Sub Category</mat-label>
                        <input  (ngModelChange)="this.searchField.next($event)"  formControlName="subCategory" readonly  matInput readonly class="__grab_cursor readonly" type="text" maxlength="50">
                    </mat-form-field>
                </div>


            </ng-container>

            <!-- search by not counted since -->
            <ng-container *ngSwitchCase="'NotCountedSince'">

                <div class="col-xl-6">
                    <mat-form-field class="custom-form-field w-100 __grab_cursor mb-3" appearance="outline">
                        <mat-label>Select Date</mat-label>
                        <input matInput (ngModelChange)="this.searchField.next($event)"  (ngModelChange)="this.searchField.next($event)"  formControlName="subCategory" [matDatepicker]="notCounted">
                        <mat-datepicker-toggle matSuffix [for]="notCounted" ngDefaultControl></mat-datepicker-toggle>
                        <mat-datepicker #notCounted></mat-datepicker>
                    </mat-form-field>
                </div>


            </ng-container>

            <!-- search by pickdate range -->
            <ng-container *ngSwitchCase="'PickedRange'">

                <div class="col-xl-3">
                    <mat-form-field class="custom-form-field w-100 __grab_cursor mb-3" appearance="outline">
                        <mat-label>From Date</mat-label>
                        <input matInput  (ngModelChange)="this.searchField.next($event)"  formControlName="pickedStart" [matDatepicker]="start">
                        <mat-datepicker-toggle matSuffix [for]="start" ngDefaultControl></mat-datepicker-toggle>
                        <mat-datepicker #start></mat-datepicker>
                    </mat-form-field>
                </div>

                <div class="col-xl-3">
                    <mat-form-field class="custom-form-field w-100 __grab_cursor mb-3" appearance="outline">
                        <mat-label>To Date</mat-label>
                        <input matInput (ngModelChange)="this.searchField.next($event)"  formControlName="pickedEnd" [matDatepicker]="end">
                        <mat-datepicker-toggle matSuffix [for]="end" ngDefaultControl></mat-datepicker-toggle>
                        <mat-datepicker #end></mat-datepicker>
                    </mat-form-field>
                </div>


            </ng-container>

            <!-- search by putaway range -->
            <ng-container *ngSwitchCase="'PutAwayRange'">

                <div class="col-xl-3">
                    <mat-form-field class="custom-form-field w-100 __grab_cursor mb-3" appearance="outline">
                        <mat-label>From Date</mat-label>
                        <input matInput (ngModelChange)="this.searchField.next($event)"  formControlName="putStart" [matDatepicker]="start">
                        <mat-datepicker-toggle matSuffix [for]="start" ngDefaultControl></mat-datepicker-toggle>
                        <mat-datepicker #start></mat-datepicker>
                    </mat-form-field>
                </div>

                <div class="col-xl-3">
                    <mat-form-field class="custom-form-field w-100 __grab_cursor mb-3" appearance="outline">
                        <mat-label>To Date</mat-label>
                        <input matInput (ngModelChange)="this.searchField.next($event)"  formControlName="putEnd" [matDatepicker]="end">
                        <mat-datepicker-toggle matSuffix [for]="end" ngDefaultControl></mat-datepicker-toggle>
                        <mat-datepicker #end></mat-datepicker>
                    </mat-form-field>
                </div>


            </ng-container>

            <!-- search by cost range -->
            <ng-container *ngSwitchCase="'CostRange'">





                <div class="col-xl-3">
                    <!-- <mat-form-field class="custom-form-field w-100 __grab_cursor mb-2" appearance="outline">
                        <mat-label>From Cost</mat-label>
                        <input matInput (ngModelChange)="this.searchField.next($event)"  formControlName="costStart" class="__grab_cursor readonly" type="text" maxlength="50">
                    </mat-form-field> -->

                    <mat-form-field  [floatLabel]="getFloatLabelValue()" [hideRequiredMarker]="hideRequiredControl.value" class="custom-form-field w-100 __grab_cursor mb-2" appearance="outline">
                        <mat-label>From Cost</mat-label>
                        <input  [matAutocomplete]="auto" (ngModelChange)="this.beginCostTA.next($event)" formControlName="costStart"   matInput  class="__grab_cursor " type="text" maxlength="50">
                        <mat-autocomplete #auto="matAutocomplete" (optionSelected)="searchData()" >
                            <mat-option *ngFor="let option of searchAutocompletBeginCost" [value]="option.cost">
                                {{option.cost}}
                            </mat-option>
                        </mat-autocomplete>
                    </mat-form-field>



                </div>

                <div class="col-xl-3">
                    <!-- <mat-form-field class="custom-form-field w-100 __grab_cursor mb-2" appearance="outline">
                        <mat-label>To Cost</mat-label>
                        <input matInput (ngModelChange)="this.searchField.next($event)"  formControlName="costEnd" class="__grab_cursor readonly" type="text" maxlength="50">
                    </mat-form-field> -->

                    <mat-form-field  [floatLabel]="getFloatLabelValue()" [hideRequiredMarker]="hideRequiredControl.value" class="custom-form-field w-100 __grab_cursor mb-2" appearance="outline">
                        <mat-label>To Cost</mat-label>
                        <input  [matAutocomplete]="auto" (ngModelChange)="this.endCostTA.next($event)" formControlName="costStart"   matInput  class="__grab_cursor " type="text" maxlength="50">
                        <mat-autocomplete #auto="matAutocomplete" (optionSelected)="searchData()" >
                            <mat-option *ngFor="let option of searchAutocompletBeginCost" [value]="option.cost">
                                {{option.cost}}
                            </mat-option>
                        </mat-autocomplete>
                    </mat-form-field>
                </div>


            </ng-container>
        </div>
    </form> 


        <div class="card br-14 borderless px-0" style="overflow-x: auto;">
            <ng-scrollbar track="all" class="mat-table-scrollbar " style="height: 350px">
                <table class="w-100 table-borderless" mat-table [dataSource]="dataSource" matSort
                    (matSortChange)="announceSortChange($event)">
                    <ng-container matColumnDef="itemNumber">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Item No </th>
                        <td mat-cell *matCellDef="let element"> {{element.itemNumber}} </td>
                    </ng-container>
                    <ng-container matColumnDef="description">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Description </th>
                        <td mat-cell *matCellDef="let element"> {{element.description}} </td>
                    </ng-container>
                    <ng-container matColumnDef="itemQuantity">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Location Quantity </th>
                        <td mat-cell *matCellDef="let element"> {{element.warehouse}} </td>
                    </ng-container>
                    <ng-container matColumnDef="unitofMeasure">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Unit Of Measure </th>
                        <td mat-cell *matCellDef="let element"> {{element.unitofMeasure}} </td>
                    </ng-container>
                    <ng-container matColumnDef="warehouse">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Warehouse</th>
                        <td mat-cell *matCellDef="let element"> {{element.warehouse}} </td>
                    </ng-container>

                    <ng-container matColumnDef="location">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Location</th>
                        <td mat-cell *matCellDef="let element"> {{element.location}} </td>
                    </ng-container>
                    <ng-container matColumnDef="goldenZone">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Velocity Code </th>
                        <td mat-cell *matCellDef="let element"> {{element.goldenZone}} </td>
                    </ng-container>

                    <ng-container matColumnDef="cellSize">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Cell Size </th>
                        <td mat-cell *matCellDef="let element"> {{element.cellSize}} </td>
                    </ng-container>

                    <ng-container matColumnDef="serialNumber">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Serial Number </th>
                        <td mat-cell *matCellDef="let element"> {{element.serialNumber}} </td>
                    </ng-container>

                    <ng-container matColumnDef="lotNumber">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Lot Number </th>
                        <td mat-cell *matCellDef="let element"> {{element.lotNumber}} </td>
                    </ng-container>

                    <ng-container matColumnDef="expirationDate">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Expiration Date </th>
                        <td mat-cell *matCellDef="let element"> {{element.expirationDate}} </td>
                    </ng-container>

                    <ng-container matColumnDef="actions">
                        <th width="10%" class="text-right" style="text-align: right" mat-header-cell *matHeaderCellDef>
                            Action
                        </th>
                        <td mat-cell *matCellDef="let element" width="10%" class="text-right" style="text-align: right">
                            <button class="me-1" mat-icon-button aria-label="Delete" matTooltip="Remove"
                                matTooltipPosition="above">
                                <mat-icon class="icon-circle-cancel">close</mat-icon>
                            </button>
                        </td>
                    </ng-container>

                    <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"
                        style=" background-color: #F9F9FF;">
                    </tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                </table>
            </ng-scrollbar>
        
        </div>
        <div class="d-flex justify-content-between bg-white mb-3">
            <div class="table-pagination d-flex justify-content-start" *ngIf="displayedColumns && dataSource">
                    <mat-paginator [length]="this.customPagination.total" [pageSize]="10" [pageSizeOptions]="[10, 20, 100]"
                      (page)="handlePageEvent($event)"></mat-paginator>
                  </div>
          </div>

        <div class="card bg-light-blue bg-50 br-none px-4 py-4 br-20 mb-3">
            <div class="row d-flex align-items-center justify-content-between">
                <div class="col-xl-9 d-flex align-items-center ">
                    <div class="col-xl-4">
                        <mat-form-field class="action-dropdown w-100" appearance="outline">
                            <mat-label>Current Count Orders</mat-label>
                            <mat-select  [(ngModel)]="orderNumber" (selectionChange)="changeCountOrder($event.value)" #matRef class="employees-action" placeholder="Actions">
                                <h6 class="ctl_name ac-dropdown-label">
                                    <span style="width:70%">Order Number</span> <span style="width:30%">Count</span>
                                </h6>
                                <mat-option style="width:900px !important;" *ngFor="let currItem of curCountOrders"
                                    [value]="currItem.orderNumber">
                                    <div class="ctl_option ac-dropdown-option">
                                        <span style="width:70%">{{currItem.orderNumber}}</span><span style="width:30%"> &nbsp;{{currItem.itemCount}}</span>
                                    </div>
                                </mat-option>

                            </mat-select>
                            <span class="material-symbols-outlined icon-expand-more">
                                expand_more
                            </span>
                        </mat-form-field>
                    </div>

                    <div class="d-flex flex-wrap gap-12 px-3">
                        <mat-checkbox class="example-margin custom-checkbox mb-2" color="primary">Include Empty
                            Locations?</mat-checkbox>
                    </div>
                </div>


                <div class="col-xl-3 float-end">
                    <mat-form-field class="action-dropdown w-100" appearance="outline">
                        <mat-label>Actions</mat-label>
                        <mat-select #matRef class="employees-action" placeholder="Actions">
                            <mat-option value="print">Print Count Orders</mat-option>
                            <mat-option  (click)="deleteCycleCount(1)"  value="1">Delete Incomplete Orders</mat-option>
                            <mat-option (click)="deleteCycleCount(0)" value="0">Delete All Orders</mat-option>
                        </mat-select>
                        <span class="material-symbols-outlined icon-expand-more">
                            expand_more
                        </span>
                    </mat-form-field>
                </div>
            </div>
        </div>


    </mat-card-content>
</mat-card>

<button mat-flat-button="" color="primary" (click)="insertQueue()"
    class="mat-focus-indicator w-100 btn-lg mat-flat-button mat-button-base mat-primary mb-3" style="flex: 1;"
    ng-reflect-color="primary" ng-reflect-disabled="false"><span class="mat-button-wrapper"> Insert Into Queue
    </span><span matripple="" class="mat-ripple mat-button-ripple" ng-reflect-disabled="false"
        ng-reflect-centered="false" ng-reflect-trigger="[object HTMLButtonElement]"></span><span
        class="mat-button-focus-overlay"></span></button>